<!DOCTYPE html><html lang="English"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Building production ready backend in 20 mins · CodexDelta</title><meta name="description" content="Building production ready backend in 20 mins - Aswin Devarajan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-minima.css"><link rel="search" type="application/opensearchdescription+xml" href="http://codexdelta.github.io/atom.xml" title="CodexDelta"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.linkedin.com/in/aswindevarajan/" target="_blank" class="nav-list-link">ABOUT ME</a></li><li class="nav-list-item"><a href="https://github.com/codexdelta" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Building production ready backend in 20 mins</h1><div class="post-info">Feb 6, 2017</div><div class="post-content"><p><img src="/images/REST-API-using-Selenium_1-768x389.jpg" alt=""></p>
<p>Nodejs is a js runtime which is built on chrom’s v8 js engine, there are few remarkable features of nodejs application which makes it choice of 2017 in building server side application. It is based on event-driven, non-blocking I/O model that makes it so lightweight and efficeint you won’t even feel like you are developing a server side application which is going to act as provider and handler for millions of incoming requests. This all comes from the family of ECMAscript which is an object oriented programming language for performing computations and manipulating computational objects within a host environment.<br><a id="more"></a><br>Prior to V8 engine host environment was something which synonym with just the browser but ever since the implementation of v8 you have the same browser plus additional feature outside the browser. In node the program never stops that’s what node mindset says. You don’t have to wait for any program to get done or send back the control when done. Nodejs application gives the capability to run js application with server-side capabilities.</p>
<p>There is a latest trend in the developers community to go mobile first, this doesn’t mean you are developing an application which is for mobile app and then for other devices, no what it means is you are developing something which is pluggable for all devices. Prior to this the main focus was on the front, its look and feel, your backend acted like simple dumper and fetcher for your frontend data. This is changing now, we are moving ahead with the more broader scope utilization with nodejs framework, prominently into IOT. Embedded devices are changing everything, you dont need front for everything.</p>
<p>GE Aviation is powering there aircraft with sensors, more like event driven architecture where nodejs is being used. Ebay has already switched to nodejs to handle there huge traffic but when it comes to traffic walmart’s site is the biggest nodejs application in terms of traffic handling. When paypal switched to nodejs for they observed a 2X performance as compared to there java web app and that was when nodejs was just new to the programming world. The recent switch of Linkedin app into a nodejs application is again benchmark achieved by nodejs, did I miss the point of Uber. Well they too have started using nodejs for there application.</p>
<p>Paypal’s tech blog says they observed a 35% decrease in response time for there site. Now that’s a huge plus point for paypal for handling such a gigantic traffic that they observe during a black Friday.<br>So where can you use nodejs?</p>
<p>JavaScript is everywhere. With JavaScript you</p>
<ul>
<li>can control Internet of Things devices,</li>
<li>implement real-time services,</li>
<li>develop web applications,</li>
<li>operate e-commerce sites,</li>
<li>serve as backend for your mobile applications</li>
<li>enterprise web services (what are you waiting for when giants are     favoring nodejs?)<br>and lot more.</li>
</ul>
<p><strong>What you get from nodejs?</strong></p>
<ul>
<li>You can cut short to half the number of developer required to     develop a product.</li>
<li>No need for extra servers to handle     application, database and separate controlling master     backend.</li>
<li>Load time for the page is reduce to 50%</li>
<li>Its always the best developers who endeavor into new tech and     explore it to the full</li>
<li>Your     customer is always happy with your fast deliveries.</li>
<li>Your developer is also happy with the opportunity to work on the best     tech in the market.</li>
<li>You staff stay with you longer since you are providing the best     learning environment which is hard to find in the market.</li>
</ul>
<p><strong>What’s next in this?</strong><br>If you observe technical trends closely you will observe that enterprises are planning and outsourcing there new requirements into modern technologies like Nodejs and they are caution but desperately want to switch to something faster and reliable. And the best choice in the market is nodejs. Which answers all the question required to handle a full-fledged system keeping a consistent technology both at front and at back. With MEAN stack we only require few hours to prototype and deliver a proof-of-concept in the beginning and move to a full monitored deployment with space for scalability once a green signal is achieved from concerned places.</p>
<p>When you are using traditional server for your web application which is based on thread then you are leveraging each incoming request to a server thread and one thread can handle only one request at a time and you can have only limited number of threads running in your web application server. If you have a huge server which gives you a response in under half a millisecond then you dont need to even think of node but this is not the real case scenario. Companies usually dont have such huge server to concurrently handle request on each thread. When it comes to nodejs it runs on a single thread and dynamically changes the traditional architecture by creating an event loop in the system this event loop handles all the incoming request and give each request a callback which is a c++ pointer and then it moves on to the next incoming request and so on no incoming request have to wait to get the response back to the request.</p>
<p>Once the incoming request is assigned a c++ pointer which is also called a callback. The task in hand of every request is passed on to operating system’s POSIX async threads which makes it so Non-blocking IO system. No matter how slow your db is your system will not break if new request keeps on coming in.</p>
<p><img src="/images/NodeJS-Stack.png" alt=""></p>
<p>If you look at the structure of the stack of nodejs you will observe that js is present only on the topmost layer rest all is built in c/c++. so the application layer interacts with nodejs standard library which is built using js and its binding which helps you create socket, http and other activities is built using c/c++ which again forward to the V8 engine which has a performance library names Libuv (earlier it was libeio and libev but libuv is the latest upgrade that V8 engine encountered). From then on the task is handled by multiple kernal threads.</p>
<p>Gone are those days when you had to serialize the data coming from frontend to backend and then to database. These days when the fullstack development is at full craze you can have the same data model at your frontend app, at your backend and at your database allowing you to focus more on quality development rather then technical issues which could come up with other tech stack.</p>
<p>Do you still have doubt about nodejs?</p>
<p>Here is the chart showing number of modules available in the nodejs, the count is more than any other platform.</p>
<p><img src="/images/module_count-768x562.png" alt=""><br><img src="/images/trend_tech_chart-768x476.png" alt=""></p>
<p><strong>Getting started with Loopback to build your REST api.</strong><br>Loopback is a nodejs framework build by strongloop an IBM owned company. Strongloop have the biggest pie share for contributing to nodejs repo.<br>So what does loopback help you with in this whole setup? It helps you to create quickly dynamic REST apis to your host server. Highly extensible and opensource framework. Your quick solution to connect your any devices with your services and get you started with real challenge that is to design the best application solving the problem.<br>Loopback uses yeoman to scaffold your node application which is controlled by loopback’s cli. This cli acts as a command center of the developer while building the application.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$slc loopback <span class="comment">// to get started with the loopback</span></div></pre></td></tr></table></figure></p>
<p><img src="/images/loopback_1.png" alt=""></p>
<p>you can give yo-ur application name over here : we will be giving it as viva-la-vida</p>
<p>A series of interaction would be there to help you get setup some key points in the application such as what should be the name of the directory in which the app will contain, which version of loopback would you like use, what kind of application you have in mind? This would include what database you want to choose from. Its pretty simple answers which would help the yeoman scaffold your app best to your requirement.</p>
<p><img src="/images/loopback_2-768x291.png" alt=""><br>It will run npm install for you and install all the dependies for you.<br>Then comes the need to define the model of data which you require for your REST api.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$cd viva-la-vida // to enter into the application root directory.</div><div class="line">$slc loopback:model</div></pre></td></tr></table></figure></p>
<p><img src="/images/loopback_3-300x192.png" alt=""><br>Now comes the real game, which is to design your model which will be exposed using REST api.</p>
<p>It asks you to choose your datasource, currently we dont have a datasource other then memory so go wth memory for now later we will be swicthing to mongodb.</p>
<p>You will be asked to give a name to your model followed by what base class would you like choose for your model. There are some prebuild base-class models which you could choose from and there is a custom option too which could help you design your own model.</p>
<p>A standard which we following while building up REST api is to give a pural name to the api endpoint to that model keeping things standard and consistent through out the application. You can also choose weather you want to keep your model common between your client and server side both or you want to keep your model only at server side. In MEAN stack it is common to use a common mode structure which could be used at client side and at server side, which saves time and keep things in consistant form.</p>
<p>There are multiple best practices which has been included in loopback including structure, security, permissions and access limits etc.</p>
<p>Now comes adding properties to the model person, its more like adding column to the table, we have defined ‘firstname’ as our first property. It will ask you to choose the type of the property to be defined for the column we have selected string as our type then it ask you whether you want to keep this property as required or not. What should be the default value for this property.</p>
<p>That was simple right, similarity you mention all the properties which is required in the model. So loopback has done a lot of work for us setting up our application with basic structure which is extensible to build a full-fledged application on this.</p>
<p>Go ahead and see the whole code in your editor and run the application by typing in:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$node .</div></pre></td></tr></table></figure></p>
<p>Most likely you will be asked to access <a href="http://0.0.0.0:3000/explorer" target="_blank" rel="external">http://0.0.0.0:3000/explorer</a> (<a href="http://0.0.0.0:3000/explorer" target="_blank" rel="external">http://0.0.0.0:3000/explorer</a>) to interact with REST apis graphically unless you have given a custom path for server. Loopback has designed a great REST interacting GUI helping you to test your REST calls. You can perform PUT, POST, GET, DELETE etc.</p>
<p>Now time change your datasource to mongodb.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$slc loopback:datasource</div></pre></td></tr></table></figure></p>
<p>This will give you an options of databases which are currently supported by loopback. Choose mongo for our current requirement.<br>You will have to install the connector for this database.<br>$npm install –save loopback-connector-mongodb<br>This will install the right conenctor for the mongodb. Following the installation change the settings of the application by updating the .loopbackrc file in the root directory with following data.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;dev&quot;: &#123;</div><div class="line">        &quot;mongodb&quot;: &#123;</div><div class="line">            &quot;host&quot;: &quot;127.0.0.1&quot;,</div><div class="line">            &quot;database&quot;: &quot;test&quot;,</div><div class="line">            &quot;username&quot;: &quot;youruser&quot;,</div><div class="line">            &quot;password&quot;: &quot;yourpass&quot;,</div><div class="line">            &quot;port&quot;: 27017</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &quot;test&quot;: &#123;</div><div class="line">        &quot;mongodb&quot;: &#123;</div><div class="line">            &quot;host&quot;: &quot;127.0.0.1&quot;,</div><div class="line">            &quot;database&quot;: &quot;test&quot;,</div><div class="line">            &quot;username&quot;: &quot;youruser&quot;,</div><div class="line">            &quot;password&quot;: &quot;yourpass&quot;,</div><div class="line">            &quot;port&quot;: 27017</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Username/password is only required if the mongodb server has authentication enabled.<br>Update the datasource.json file inside your server directory. With following code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">&quot;mongodb&quot;: &#123;</div><div class="line">&quot;host&quot;: &quot;localhost&quot;,</div><div class="line">&quot;port&quot;: 27017,</div><div class="line">&quot;url&quot;: &quot;http://mongodb://localhost/loopback&quot;,</div><div class="line">&quot;database&quot;: &quot;mongodb&quot;,</div><div class="line">&quot;password&quot;: &quot;&quot;,</div><div class="line">&quot;name&quot;: &quot;mongodb&quot;,</div><div class="line">&quot;user&quot;: &quot;&quot;,</div><div class="line">&quot;connector&quot;: &quot;mongodb&quot;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now you have a datasource with the name of mongodb. You just need one more configuration to make it run. In your server folder go to model-config.json and replace db which was your default in-memory db for your model with new ‘mongodb’. This will connect your model data with your database and replicate the structure.</p>
<p>That’s it run you application with “node .” and experiment it as you like. This will give you a better understanding of the application.<br>So this was an example which involved basic REST app with nodejs and loopback. But the next step should be to make it a full-fledged node app which is monitor-able and scalable.</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/04/09/playing_around_with_custom_directive_in_AngularJs/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'codexdelta';
var disqus_identifier = '2017/02/06/Building_production_ready_backend_in_20_mins/';
var disqus_title = 'Building production ready backend in 20 mins';
var disqus_url = 'http://codexdelta.github.io/2017/02/06/Building_production_ready_backend_in_20_mins/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//codexdelta.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 - 2018 <a href="http://codexdelta.github.io">Aswin Devarajan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script rel="text/javascript" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-113154557-1",'auto');ga('send','pageview');</script></body></html>