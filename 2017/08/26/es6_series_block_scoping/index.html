<!DOCTYPE html><html lang="English"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>ES6 Series - Block Scoping · CodexDelta</title><meta name="description" content="ES6 Series - Block Scoping - Aswin Devarajan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-minima.css"><link rel="search" type="application/opensearchdescription+xml" href="http://codexdelta.github.io/atom.xml" title="CodexDelta"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://www.linkedin.com/in/aswindevarajan/" target="_blank" class="nav-list-link">ABOUT ME</a></li><li class="nav-list-item"><a href="https://github.com/codexdelta" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ES6 Series - Block Scoping</h1><div class="post-info">Aug 26, 2017</div><div class="post-content"><p>Hoisting: the mother of all problems for a beginner.</p>
<p>Accepting the concept of hoisting has always been difficult to a javascript beginner.<br><a id="more"></a><br>And if you are starting your career in javascript that too with es6 then you must know how es6 has resolved this problem with block scoping similar to c-type languages.</p>
<p>Hoisting could be explained with following example</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">Note: go through all the codes  snippets  and <span class="keyword">for</span> best</div><div class="line">learning experience, execute each snippets <span class="keyword">in</span> your browser<span class="string">'s console.</span></div></pre></td></tr></table></figure>
<p><strong>1: Getting started</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">console.log(test) // Uncaught ReferenceError: test is not defined</div></pre></td></tr></table></figure></p>
<p>Reason: test is a variable which has never been declared or initialized.</p>
<p> <strong>2: Hoisting of a variable in ES5</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">condition</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(condition)&#123;</div><div class="line">    <span class="keyword">var</span> value = <span class="string">'blue'</span>;</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(value) <span class="comment">// value exists here as undefined</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'value'</span>) <span class="comment">// value exists here too as undefined.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Reason:</p>
<p>variable value gets hoisted, meaning it gets declared before the function is declared thus it is accessible through out function that’s why we get ‘undefined’. but its initialization only happens when the condition is meet.</p>
<p>Problem : unwanted variable available outside its scope.</p>
<p>This got resolved in es6 with the introduction of block scoped variables by using let and const.</p>
<p> <strong>3 : No hoisting in ES6</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">condition</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(condition)&#123;</div><div class="line">    <span class="keyword">let</span> value = <span class="string">'blue'</span>;</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">  	<span class="comment">// value does not exists here</span></div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">  &#125;</div><div class="line">  <span class="comment">// value does not exits here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> Reason : let makes sure that value variable is available to its defined scope which is inside if condition.</p>
<p> <strong>4 : No redeclaration of variable in ES6</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> value = <span class="string">'blue'</span>;</div><div class="line"></div><div class="line"><span class="keyword">let</span> value = <span class="string">'red'</span>; <span class="comment">//Uncaught TypeError: Identifier 'value' has already been declared</span></div></pre></td></tr></table></figure>
<p>But if you are in different scope then they won’t throw the error.</p>
<p> <strong>5: Every const must be initialized on declaration</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> NAME = <span class="string">'aswin'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VIVA; <span class="comment">// Syntax error: must be initialized.</span></div></pre></td></tr></table></figure>
<p> <strong>6 : Const declaration prevents the binding and not the value itself.</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> TEST = <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> TEST = <span class="number">2</span>; <span class="comment">// throw error</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> VIVA = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">'aswin'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VIVA.name = <span class="string">'devarajan'</span> <span class="comment">// works perfectly</span></div><div class="line"></div><div class="line">VIVA = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'devarajan'</span> <span class="comment">// will throw error.</span></div><div class="line">&#125;</div><div class="line"></div></pre></td></tr></table></figure>
<p> <strong>7: Using variable in loop</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// using variable in loop with var</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</div><div class="line">  <span class="built_in">console</span>.log(i)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'after loop'</span>, i) <span class="comment">//  i is still accessable as 10</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// using variable in loop with let</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j&lt;<span class="number">10</span>; j++)&#123;</div><div class="line">  <span class="built_in">console</span>.log(j)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'after loop'</span>, j) <span class="comment">// throw error as j is not defined</span></div></pre></td></tr></table></figure>
<p>Reason : since j is scope binding due to let it is not available outside the loop. But in case of i it is available due to hoisting.</p>
<p> <strong>8 : Using function in a loop</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// using variable in loop</span></div><div class="line"><span class="keyword">var</span> funcs = []</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j&lt;<span class="number">10</span>; j++)&#123;</div><div class="line">  funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="built_in">console</span>.log(j);&#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">funcs.forEach(d)&#123;</div><div class="line">  d();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This would print 10 ten times.  since the loop has been executed.  </p>
<p>To resolve this we could use a Immediate Invoking Function (IIFS).</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> funcs = [];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">  funcs.push((<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(value);</div><div class="line">    &#125;</div><div class="line">  &#125;)(i))</div><div class="line">&#125;</div><div class="line"></div><div class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</div><div class="line">  func();</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>But with es6 you wont have to go through this pain since let would allow you to store each unique instance of variable.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> funcs = [];</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;<span class="number">10</span>; j++)&#123;</div><div class="line">    funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(j);</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>)</span>&#123;</div><div class="line">  func();</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>This is the end of the block scope related functionality added in ES6. I would be adding more examples as I come across.</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/05/02/transclusion_in_angularjs/" class="prev">上一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'aswindevarajan';
var disqus_identifier = '2017/08/26/es6_series_block_scoping/';
var disqus_title = 'ES6 Series - Block Scoping';
var disqus_url = 'http://codexdelta.github.io/2017/08/26/es6_series_block_scoping/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//aswindevarajan.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 - 2018 <a href="http://codexdelta.github.io">Aswin Devarajan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script rel="text/javascript" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-113154557-1",'auto');ga('send','pageview');</script></body></html>